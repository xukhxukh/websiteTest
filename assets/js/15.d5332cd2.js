(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{211:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"dva-å›¾è§£"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dva-å›¾è§£"}},[t._v("#")]),t._v(" Dva å›¾è§£")]),t._v(" "),s("blockquote",[s("p",[t._v("ä½œè€…ï¼šè‡³æ­£"),s("br"),t._v("\nåŸæ–‡é“¾æ¥ï¼š"),s("a",{attrs:{href:"https://yuque.com/flying.ni/the-tower/tvzasn",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://yuque.com/flying.ni/the-tower/tvzasn"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"ç¤ºä¾‹èƒŒæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¤ºä¾‹èƒŒæ™¯"}},[t._v("#")]),t._v(" ç¤ºä¾‹èƒŒæ™¯")]),t._v(" "),s("p",[t._v("æœ€å¸¸è§çš„ Web ç±»ç¤ºä¾‹ä¹‹ä¸€: TodoList = Todo list + Add todo button")]),t._v(" "),s("h2",{attrs:{id:"å›¾è§£ä¸€-react-è¡¨ç¤ºæ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å›¾è§£ä¸€-react-è¡¨ç¤ºæ³•"}},[t._v("#")]),t._v(" å›¾è§£ä¸€: React è¡¨ç¤ºæ³•")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.yuque.com/yuque/0/2018/png/103904/1528436560812-2586a0b5-7a6a-4a07-895c-f822fa85d5de.png",alt:"å›¾ç‰‡.png | left | 747x518"}})]),t._v(" "),s("p",[t._v("æŒ‰ç…§ React å®˜æ–¹æŒ‡å¯¼æ„è§, å¦‚æœå¤šä¸ª Component ä¹‹é—´è¦å‘ç”Ÿäº¤äº’, é‚£ä¹ˆçŠ¶æ€(å³: æ•°æ®)å°±ç»´æŠ¤åœ¨è¿™äº› Component çš„æœ€å°å…¬çº¦çˆ¶èŠ‚ç‚¹ä¸Š, ä¹Ÿå³æ˜¯ "),s("code",[t._v("<App/>")])]),t._v(" "),s("p",[s("code",[t._v("<TodoList/> <Todo/>")]),t._v(" ä»¥åŠ"),s("code",[t._v("<AddTodoBtn/>")]),t._v(" æœ¬èº«ä¸ç»´æŒä»»ä½• state, å®Œå…¨ç”±çˆ¶èŠ‚ç‚¹"),s("code",[t._v("<App/>")]),t._v(" ä¼ å…¥ props ä»¥å†³å®šå…¶å±•ç°, æ˜¯ä¸€ä¸ªçº¯å‡½æ•°çš„å­˜åœ¨å½¢å¼, å³: "),s("code",[t._v("Pure Component")])]),t._v(" "),s("h2",{attrs:{id:"å›¾è§£äºŒ-redux-è¡¨ç¤ºæ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å›¾è§£äºŒ-redux-è¡¨ç¤ºæ³•"}},[t._v("#")]),t._v(" å›¾è§£äºŒ: Redux è¡¨ç¤ºæ³•")]),t._v(" "),s("p",[t._v("React åªè´Ÿè´£é¡µé¢æ¸²æŸ“, è€Œä¸è´Ÿè´£é¡µé¢é€»è¾‘, é¡µé¢é€»è¾‘å¯ä»¥ä»ä¸­å•ç‹¬æŠ½å–å‡ºæ¥, å˜æˆ store")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.yuque.com/yuque/0/2018/png/103904/1528436134375-4c15f63d-72f1-4c73-94a6-55b220d2547c.png",alt:"å›¾ç‰‡.png | left | 747x558"}})]),t._v(" "),s("p",[t._v("ä¸å›¾ä¸€ç›¸æ¯”, å‡ ä¸ªæ˜æ˜¾çš„æ”¹è¿›ç‚¹:")]),t._v(" "),s("ol",[s("li",[t._v("çŠ¶æ€åŠé¡µé¢é€»è¾‘ä» "),s("code",[t._v("<App/>")]),t._v("é‡Œé¢æŠ½å–å‡ºæ¥, æˆä¸ºç‹¬ç«‹çš„ store, é¡µé¢é€»è¾‘å°±æ˜¯ reducer")]),t._v(" "),s("li",[s("code",[t._v("<TodoList/>")]),t._v(" åŠ"),s("code",[t._v("<AddTodoBtn/>")]),t._v("éƒ½æ˜¯ Pure Component, é€šè¿‡ connect æ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç»™å®ƒä¿©åŠ ä¸€å±‚ wrapper ä»è€Œå»ºç«‹èµ·ä¸ store çš„è”ç³»: å¯ä»¥é€šè¿‡ dispatch å‘ store æ³¨å…¥ action, ä¿ƒä½¿ store çš„çŠ¶æ€è¿›è¡Œå˜åŒ–, åŒæ—¶åˆè®¢é˜…äº† store çš„çŠ¶æ€å˜åŒ–, ä¸€æ—¦çŠ¶æ€æœ‰å˜, è¢« connect çš„ç»„ä»¶ä¹Ÿéšä¹‹åˆ·æ–°")]),t._v(" "),s("li",[t._v("ä½¿ç”¨ dispatch å¾€ store å‘é€ action çš„è¿™ä¸ªè¿‡ç¨‹æ˜¯å¯ä»¥è¢«æ‹¦æˆªçš„, è‡ªç„¶è€Œç„¶åœ°å°±å¯ä»¥åœ¨è¿™é‡Œå¢åŠ å„ç§ Middleware, å®ç°å„ç§è‡ªå®šä¹‰åŠŸèƒ½, eg: logging")])]),t._v(" "),s("p",[t._v("è¿™æ ·ä¸€æ¥, å„ä¸ªéƒ¨åˆ†å„å¸å…¶èŒ, è€¦åˆåº¦æ›´ä½, å¤ç”¨åº¦æ›´é«˜, æ‰©å±•æ€§æ›´å¥½")]),t._v(" "),s("h2",{attrs:{id:"å›¾è§£ä¸‰-åŠ å…¥-saga"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å›¾è§£ä¸‰-åŠ å…¥-saga"}},[t._v("#")]),t._v(" å›¾è§£ä¸‰: åŠ å…¥ Saga")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.yuque.com/yuque/0/2018/png/103904/1528436167824-7fa834ea-aa6c-4f9f-bab5-b8c5312bcf7e.png",alt:"å›¾ç‰‡.png | left | 747x504"}})]),t._v(" "),s("p",[t._v("ä¸Šé¢è¯´äº†, å¯ä»¥ä½¿ç”¨ Middleware æ‹¦æˆª action, è¿™æ ·ä¸€æ¥å¼‚æ­¥çš„ç½‘ç»œæ“ä½œä¹Ÿå°±å¾ˆæ–¹ä¾¿äº†, åšæˆä¸€ä¸ª Middleware å°±è¡Œäº†, è¿™é‡Œä½¿ç”¨ redux-saga è¿™ä¸ªç±»åº“, ä¸¾ä¸ªæ —å­:")]),t._v(" "),s("ol",[s("li",[t._v("ç‚¹å‡»åˆ›å»º Todo çš„æŒ‰é’®, å‘èµ·ä¸€ä¸ª type == addTodo çš„ action")]),t._v(" "),s("li",[t._v("saga æ‹¦æˆªè¿™ä¸ª action, å‘èµ· http è¯·æ±‚, å¦‚æœè¯·æ±‚æˆåŠŸ, åˆ™ç»§ç»­å‘ reducer å‘ä¸€ä¸ª type == addTodoSucc çš„ action, æç¤ºåˆ›å»ºæˆåŠŸ, åä¹‹åˆ™å‘é€ type == addTodoFail çš„ action å³å¯")])]),t._v(" "),s("h2",{attrs:{id:"å›¾è§£å››-dva-è¡¨ç¤ºæ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å›¾è§£å››-dva-è¡¨ç¤ºæ³•"}},[t._v("#")]),t._v(" å›¾è§£å››: Dva è¡¨ç¤ºæ³•")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.yuque.com/yuque/0/2018/png/103904/1528436195004-cd3800f2-f13d-40ba-bb1f-4efba99cfe0d.png",alt:"å›¾ç‰‡.png | left | 747x490"}})]),t._v(" "),s("p",[t._v("æœ‰äº†å‰é¢çš„ä¸‰æ­¥é“ºå«, Dva çš„å‡ºç°ä¹Ÿå°±æ°´åˆ°æ¸ æˆäº†, æ­£å¦‚ Dva å®˜ç½‘æ‰€è¨€, Dva æ˜¯åŸºäº React + Redux + Saga çš„æœ€ä½³å®è·µæ²‰æ·€, åšäº† 3 ä»¶å¾ˆé‡è¦çš„äº‹æƒ…, å¤§å¤§æå‡äº†ç¼–ç ä½“éªŒ:")]),t._v(" "),s("ol",[s("li",[t._v("æŠŠ store åŠ saga ç»Ÿä¸€ä¸ºä¸€ä¸ª model çš„æ¦‚å¿µ, å†™åœ¨ä¸€ä¸ª js æ–‡ä»¶é‡Œé¢")]),t._v(" "),s("li",[t._v("å¢åŠ äº†ä¸€ä¸ª Subscriptions, ç”¨äºæ”¶é›†å…¶ä»–æ¥æºçš„ action, eg: é”®ç›˜æ“ä½œ")]),t._v(" "),s("li",[t._v("model å†™æ³•å¾ˆç®€çº¦, ç±»ä¼¼äº DSL æˆ–è€… RoR, coding å¿«å¾—é£èµ·âœˆï¸")])]),t._v(" "),s("p",[s("code",[t._v("çº¦å®šä¼˜äºé…ç½®, æ€»æ˜¯å¥½çš„")]),t._v("ğŸ˜†")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("model")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  namespace"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'count'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  state"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    current"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  reducers"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newCurrent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" newCurrent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("record "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" newCurrent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("record"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        current"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" newCurrent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("minus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" current"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  effects"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("action"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" call"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" put "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("delay"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'minus'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  subscriptions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("keyboardWatcher")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" dispatch "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'âŒ˜+up, ctrl+up'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'add'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);