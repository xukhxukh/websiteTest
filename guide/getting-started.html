<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>快速上手 | SEF框架</title>
    <meta name="description" content="SEF1/SEF2框架使用说明.">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/websiteTest/assets/css/0.styles.2851619e.css" as="style"><link rel="preload" href="/websiteTest/assets/js/app.ecceaa25.js" as="script"><link rel="preload" href="/websiteTest/assets/js/2.851851d3.js" as="script"><link rel="preload" href="/websiteTest/assets/js/16.e37710b5.js" as="script"><link rel="prefetch" href="/websiteTest/assets/js/10.2b2a6f99.js"><link rel="prefetch" href="/websiteTest/assets/js/11.e2a4292c.js"><link rel="prefetch" href="/websiteTest/assets/js/12.2da23257.js"><link rel="prefetch" href="/websiteTest/assets/js/13.a1abb0ae.js"><link rel="prefetch" href="/websiteTest/assets/js/14.4eefdb3c.js"><link rel="prefetch" href="/websiteTest/assets/js/15.d5332cd2.js"><link rel="prefetch" href="/websiteTest/assets/js/17.c073297e.js"><link rel="prefetch" href="/websiteTest/assets/js/18.1ffc641a.js"><link rel="prefetch" href="/websiteTest/assets/js/19.1ae67b9a.js"><link rel="prefetch" href="/websiteTest/assets/js/3.fc587bee.js"><link rel="prefetch" href="/websiteTest/assets/js/4.b0dd307f.js"><link rel="prefetch" href="/websiteTest/assets/js/5.54a0d41e.js"><link rel="prefetch" href="/websiteTest/assets/js/6.780a1252.js"><link rel="prefetch" href="/websiteTest/assets/js/7.d49e5b5e.js"><link rel="prefetch" href="/websiteTest/assets/js/8.9ab9190a.js"><link rel="prefetch" href="/websiteTest/assets/js/9.981241f0.js">
    <link rel="stylesheet" href="/websiteTest/assets/css/0.styles.2851619e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/websiteTest/" class="home-link router-link-active"><!----> <span class="site-name">SEF框架</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/websiteTest/demo/" class="nav-link">
  测试Demo
</a></div><div class="nav-item"><a href="/websiteTest/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="https://github.com/dvajs/dva/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  发布日志
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/xukhxukh/websiteTest/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/websiteTest/demo/" class="nav-link">
  测试Demo
</a></div><div class="nav-item"><a href="/websiteTest/guide/" class="nav-link router-link-active">
  指南
</a></div><div class="nav-item"><a href="https://github.com/dvajs/dva/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  发布日志
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/xukhxukh/websiteTest/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/websiteTest/guide/" class="sidebar-link">介绍-修改后</a></li><li><a href="/websiteTest/guide/getting-started.html" class="active sidebar-link">快速上手</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/websiteTest/guide/getting-started.html#安装-dva-cli" class="sidebar-link">安装 dva-cli</a></li><li class="sidebar-sub-header"><a href="/websiteTest/guide/getting-started.html#创建新应用" class="sidebar-link">创建新应用</a></li><li class="sidebar-sub-header"><a href="/websiteTest/guide/getting-started.html#使用-antd" class="sidebar-link">使用 antd</a></li><li class="sidebar-sub-header"><a href="/websiteTest/guide/getting-started.html#定义路由" class="sidebar-link">定义路由</a></li><li class="sidebar-sub-header"><a href="/websiteTest/guide/getting-started.html#编写-ui-component" class="sidebar-link">编写 UI Component</a></li><li class="sidebar-sub-header"><a href="/websiteTest/guide/getting-started.html#定义-model" class="sidebar-link">定义 Model</a></li><li class="sidebar-sub-header"><a href="/websiteTest/guide/getting-started.html#connect-起来" class="sidebar-link">connect 起来</a></li><li class="sidebar-sub-header"><a href="/websiteTest/guide/getting-started.html#构建应用" class="sidebar-link">构建应用</a></li></ul></li><li><a href="/websiteTest/guide/examples-and-boilerplates.html" class="sidebar-link">例子和脚手架</a></li><li><a href="/websiteTest/guide/concepts.html" class="sidebar-link">Dva 概念</a></li><li><a href="/websiteTest/guide/introduce-class.html" class="sidebar-link">入门课</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>社区</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/websiteTest/guide/fig-show.html" class="sidebar-link">Dva 图解</a></li><li><a href="/websiteTest/guide/develop-complex-spa.html" class="sidebar-link">使用 Dva 开发复杂 SPA</a></li><li><a href="/websiteTest/guide/source-code-explore.html" class="sidebar-link">Dva 源码解析</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="快速上手"><a href="#快速上手" class="header-anchor">#</a> 快速上手</h1> <h2 id="安装-dva-cli"><a href="#安装-dva-cli" class="header-anchor">#</a> 安装 dva-cli</h2> <p>通过 npm 安装 dva-cli 并确保版本是 <code>0.9.1</code> 或以上。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> dva-cli -g
$ dva -v
dva-cli version <span class="token number">0.9</span>.1
</code></pre></div><h2 id="创建新应用"><a href="#创建新应用" class="header-anchor">#</a> 创建新应用</h2> <p>安装完 dva-cli 之后，就可以在命令行里访问到 <code>dva</code> 命令（<a href="http://stackoverflow.com/questions/15054388/global-node-modules-not-installing-correctly-command-not-found" target="_blank" rel="noopener noreferrer">不能访问？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）。现在，你可以通过 <code>dva new</code> 创建新应用。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ dva new dva-quickstart
</code></pre></div><p>这会创建 <code>dva-quickstart</code> 目录，包含项目初始化目录和文件，并提供开发服务器、构建脚本、数据 mock 服务、代理服务器等功能。</p> <p>然后我们 <code>cd</code> 进入 <code>dva-quickstart</code> 目录，并启动开发服务器：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> dva-quickstart
$ <span class="token function">npm</span> start
</code></pre></div><p>几秒钟后，你会看到以下输出：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Compiled successfully<span class="token operator">!</span>

The app is running at:

  http://localhost:8000/

Note that the development build is not optimized.
To create a production build, use <span class="token function">npm</span> run build.
</code></pre></div><p>在浏览器里打开 http://localhost:8000 ，你会看到 dva 的欢迎界面。</p> <h2 id="使用-antd"><a href="#使用-antd" class="header-anchor">#</a> 使用 antd</h2> <p>通过 npm 安装 <code>antd</code> 和 <code>babel-plugin-import</code> 。<code>babel-plugin-import</code> 是用来按需加载 antd 的脚本和样式的，详见 <a href="https://github.com/ant-design/babel-plugin-import" target="_blank" rel="noopener noreferrer">repo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> antd babel-plugin-import --save
</code></pre></div><p>编辑 <code>.webpackrc</code>，使 <code>babel-plugin-import</code> 插件生效。</p> <div class="language-diff extra-class"><pre class="language-diff"><code>{
<span class="token inserted-sign inserted">+  &quot;extraBabelPlugins&quot;: [
+    [&quot;import&quot;, { &quot;libraryName&quot;: &quot;antd&quot;, &quot;libraryDirectory&quot;: &quot;es&quot;, &quot;style&quot;: &quot;css&quot; }]
+  ]
</span>}
</code></pre></div><blockquote><p>注：dva-cli 基于 roadhog 实现 build 和 dev，更多 <code>.webpackrc</code> 的配置详见 <a href="https://github.com/sorrycc/roadhog#%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener noreferrer">roadhog#配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h2 id="定义路由"><a href="#定义路由" class="header-anchor">#</a> 定义路由</h2> <p>我们要写个应用来先显示产品列表。首先第一步是创建路由，路由可以想象成是组成应用的不同页面。</p> <p>新建 route component <code>routes/Products.js</code>，内容如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Products</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>List <span class="token keyword">of</span> Products<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Products<span class="token punctuation">;</span>
</code></pre></div><p>添加路由信息到路由表，编辑 <code>router.js</code> :</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted">+ import Products from './routes/Products';
</span>...
<span class="token inserted-sign inserted">+ &lt;Route path=&quot;/products&quot; exact component={Products} /&gt;
</span></code></pre></div><p>然后在浏览器里打开 http://localhost:8000/#/products ，你应该能看到前面定义的 <code>&lt;h2&gt;</code> 标签。</p> <h2 id="编写-ui-component"><a href="#编写-ui-component" class="header-anchor">#</a> 编写 UI Component</h2> <p>随着应用的发展，你会需要在多个页面分享 UI 元素 (或在一个页面使用多次)，在 dva 里你可以把这部分抽成 component 。</p> <p>我们来编写一个 <code>ProductList</code> component，这样就能在不同的地方显示产品列表了。</p> <p>新建 <code>components/ProductList.js</code> 文件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Table<span class="token punctuation">,</span> Popconfirm<span class="token punctuation">,</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">ProductList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> onDelete<span class="token punctuation">,</span> products <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'Name'</span><span class="token punctuation">,</span>
    dataIndex<span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token string">'Actions'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> record</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Popconfirm title<span class="token operator">=</span><span class="token string">&quot;Delete?&quot;</span> onConfirm<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">onDelete</span><span class="token punctuation">(</span>record<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Button<span class="token operator">&gt;</span>Delete<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Popconfirm<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Table
      dataSource<span class="token operator">=</span><span class="token punctuation">{</span>products<span class="token punctuation">}</span>
      columns<span class="token operator">=</span><span class="token punctuation">{</span>columns<span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

ProductList<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  onDelete<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>func<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
  products<span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>array<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> ProductList<span class="token punctuation">;</span>
</code></pre></div><h2 id="定义-model"><a href="#定义-model" class="header-anchor">#</a> 定义 Model</h2> <p>完成 UI 后，现在开始处理数据和逻辑。</p> <p>dva 通过 model 的概念把一个领域的模型管理起来，包含同步更新 state 的 reducers，处理异步逻辑的 effects，订阅数据源的 subscriptions 。</p> <p>新建 model <code>models/products.js</code> ：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  namespace<span class="token operator">:</span> <span class="token string">'products'</span><span class="token punctuation">,</span>
  state<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  reducers<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'delete'</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token punctuation">{</span> payload<span class="token operator">:</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">!==</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>这个 model 里：</p> <ul><li><code>namespace</code> 表示在全局 state 上的 key</li> <li><code>state</code> 是初始值，在这里是空数组</li> <li><code>reducers</code> 等同于 redux 里的 reducer，接收 action，同步更新 state</li></ul> <p>然后别忘记在 <code>index.js</code> 里载入他：</p> <div class="language-diff extra-class"><pre class="language-diff"><code>// 3. Model
<span class="token inserted-sign inserted">+ app.model(require('./models/products').default);
</span></code></pre></div><h2 id="connect-起来"><a href="#connect-起来" class="header-anchor">#</a> connect 起来</h2> <p>到这里，我们已经单独完成了 model 和 component，那么他们如何串联起来呢?</p> <p>dva 提供了 connect 方法。如果你熟悉 redux，这个 connect 就是 react-redux 的 connect 。</p> <p>编辑 <code>routes/Products.js</code>，替换为以下内容：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ProductList <span class="token keyword">from</span> <span class="token string">'../components/ProductList'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Products</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> dispatch<span class="token punctuation">,</span> products <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">handleDelete</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">'products/delete'</span><span class="token punctuation">,</span>
      payload<span class="token operator">:</span> id<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>List <span class="token keyword">of</span> Products<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ProductList onDelete<span class="token operator">=</span><span class="token punctuation">{</span>handleDelete<span class="token punctuation">}</span> products<span class="token operator">=</span><span class="token punctuation">{</span>products<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// export default Products;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> products <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  products<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Products<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>最后，我们还需要一些初始数据让这个应用 run 起来。编辑 <code>index.js</code>：</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-sign deleted">- const app = dva();
</span><span class="token inserted-sign inserted">+ const app = dva({
+   initialState: {
+     products: [
+       { name: 'dva', id: 1 },
+       { name: 'antd', id: 2 },
+     ],
+   },
+ });
</span></code></pre></div><p>刷新浏览器，应该能看到以下效果：</p> <p style="text-align:center;"><img src="https://zos.alipayobjects.com/rmsportal/GQJeDDeUCSTRMMg.gif"></p> <h2 id="构建应用"><a href="#构建应用" class="header-anchor">#</a> 构建应用</h2> <p>完成开发并且在开发环境验证之后，就需要部署给我们的用户了。先执行下面的命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> run build
</code></pre></div><p>几秒后，输出应该如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> @ build /private/tmp/myapp
<span class="token operator">&gt;</span> roadhog build

Creating an optimized production build<span class="token punctuation">..</span>.
Compiled successfully.

File sizes after gzip:

  <span class="token number">82.98</span> KB  dist/index.js
  <span class="token number">270</span> B     dist/index.css
</code></pre></div><p><code>build</code> 命令会打包所有的资源，包含 JavaScript, CSS, web fonts, images, html 等。然后你可以在 <code>dist/</code> 目录下找到这些文件。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/xukhxukh/websiteTest/edit/master/docs/guide/getting-started.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2/20/2020, 2:37:00 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/websiteTest/guide/" class="prev router-link-active">
        介绍-修改后
      </a></span> <span class="next"><a href="/websiteTest/guide/examples-and-boilerplates.html">
        例子和脚手架
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/websiteTest/assets/js/app.ecceaa25.js" defer></script><script src="/websiteTest/assets/js/2.851851d3.js" defer></script><script src="/websiteTest/assets/js/16.e37710b5.js" defer></script>
  </body>
</html>
